---
title: "Bellabeat Case Study"
author: "Santhosh Pagavathsing"
date: "11/04/2022"
output:
  pdf_document: default
  html_document: default
---

## Business Task
The given task is to analyze smart device usage data and gain insight into how consumers use non-Bellabeat smart devices, in order to help guide future Bellabeat marketing strategies.

## Data Importing and Summarizing
### Data Source Used
The open source [FitBit Fitness Tracker Data](https://www.kaggle.com/datasets/arashnic/fitbit) is collected from Kaggle, posted by user [MÃ¶bius](https://www.kaggle.com/arashnic). It contains data generated by thirty consenting Fitbit users who submitted their personal tracking data. This includes hourly and daily level output for physical activity, steps, heart rate, and sleep monitoring, which gives insight into user habits. This data appears to be credible since it has a usability score of 10, 1032 upvotes, and 30000 downloads. 

There are some limitations to this data set such as: not providing unit of measurement for columns (ex. TotalDistance), missing or excess data added (active minutes and sleep data not resulting in a full 24 hours), not enough information of the population that the data was collected from (gender, age, location, etc). These limitations were considered when completing the analysis. The objective is to get an understanding of how people generally use their smart devices and what kind of activity they do. 

### Loading Packages
```{r, message=FALSE}
library(tidyverse)
library(dplyr)
library(lubridate)
```

### Importing Datasets
```{r, message=FALSE}
dailyActivity <- read_csv("/Users/santhosh/Documents/R Studio Projects/Bellabeat/dailyActivity_merged.csv")
dailySleep <- read_csv("/Users/santhosh/Documents/R Studio Projects/Bellabeat/sleepDay_merged.csv")
hourlyIntensities <- read_csv("/Users/santhosh/Documents/R Studio Projects/Bellabeat/hourlyIntensities_merged.csv")
```

### Checking each dataset
```{r, message=FALSE}
head(dailyActivity)
head(dailySleep)
head(hourlyIntensities)
```

### Summarizing the data
```{r, message=FALSE}
dailyActivity %>% 
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes, SedentaryMinutes, TotalSteps, TotalDistance, Calories) %>% 
  summary()
```

Looking at the summary statistics we see that on average, most people spend their time being sedentary (roughly 16 hours) When it comes to activity, most people spend their time being lightly active (roughly 3 hours) rather than being very active or fairly active. We can also see the average number of steps taken per day is 7638 while Calories burned is 2304.  

## Analysis
### Total Steps VS. Active Minutes
```{r, message=FALSE}
new_dailyActivity <- dailyActivity %>% 
  mutate(ActiveMinutes = VeryActiveMinutes + FairlyActiveMinutes + LightlyActiveMinutes) %>% 
  mutate(AllMinutes = ActiveMinutes + SedentaryMinutes)

new_dailyActivity %>% 
  ggplot(aes(x = ActiveMinutes, y = TotalSteps)) + 
  geom_point() + geom_smooth(method = "lm") + 
  labs(title="Total Steps VS. Active Minutes", y= "Total Steps", x = "Active Minutes")
```

This graph compares the total minutes a person spent in a day (Very active minutes, fairly active minutes, and  lightly active minutes) in relation to the number of steps they took in that day. Here we can see that there is a correlation between the active minutes and total steps. This can mean that most people favor spending their active time running, jogging, or walking. 

### Active Minutes by Intensity
```{r, message=FALSE}
Narrow_Activity <- dailyActivity %>% 
  select(VeryActiveMinutes, FairlyActiveMinutes, LightlyActiveMinutes) %>% 
  pivot_longer(VeryActiveMinutes:LightlyActiveMinutes, names_to = "IntensityType", values_to = "Minutes") %>% 
  arrange(IntensityType)

ggplot(Narrow_Activity, aes(x = reorder(IntensityType, Minutes, no.rm = TRUE), y = Minutes)) + geom_boxplot() + 
  labs(title="Active Minutes by Intensity", y= "Minutes", x = "Intensity Level")
```

The graph visualizes the spread of each activity level by category from fairly active, to lightly active. As noted while getting the summary statistics, we can see that on average most minutes are spent doing light activities. 

### Total Minutes Asleep VS Calories Burned
```{r, message=FALSE}
dateSleep <- dailySleep %>% 
  rename(dateRecord = SleepDay) %>% 
  mutate(dateRecord = as.Date(mdy_hms(dateRecord)))

dateActivity <- new_dailyActivity %>% 
  rename(dateRecord = ActivityDate) %>% 
  mutate(dateRecord = as.Date(mdy(dateRecord)))

SleepActivity_merged <- merge(dateSleep, dateActivity, by=c("Id","dateRecord"))

SleepActivity_merged %>%
  ggplot(aes(x = Calories, y = TotalMinutesAsleep)) +
  geom_point() + geom_smooth(method = "lm") + 
  labs(title="Total Minutes Asleep VS. Calories Burned", y = "Total Minutes Asleep", x = "Calories")
```

This graph compares the amount of sleep a person got for a day with the number of calories they burned. To get this, first we needed to merge the sleep data with the activity data. This was done by performing an inner join between the two data sets by each person's Id and the Date that the data was recorded. To my surprise there was no correlation between sleep and calories burned. This was also checked with activity and step data as well, there was no correlation there either. This is surprising since it would make sense that if a person were to be more active that would make them more tired and make them fall asleep for longer periods of time. However, this shows that each person is different with their own sleeping patterns and schedules, and that doesn't necessarily rely on activity levels. 

### Most Active Days of the Week
```{r, message=FALSE}
dailyActivity %>% select(ActivityDate, VeryActiveMinutes) %>%
  mutate(ActivityDate = weekdays(as.Date(mdy(ActivityDate)))) %>% 
  mutate(ActivityDate = factor(ActivityDate, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))) %>%
  ggplot(aes(ActivityDate, VeryActiveMinutes, fill=VeryActiveMinutes)) +
  geom_bar(stat="sum") + 
  labs(title="Very Active Days of the Week", y = "Very Active Minutes", x = "Day of Week")

new_dailyActivity %>% select(ActivityDate, ActiveMinutes) %>%
  mutate(ActivityDate = weekdays(as.Date(mdy(ActivityDate)))) %>% 
  mutate(ActivityDate = factor(ActivityDate, levels = c("Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"))) %>%
  ggplot(aes(ActivityDate, ActiveMinutes, fill=ActiveMinutes)) +
  geom_bar(stat="sum") +
  labs(title="Active Days of the Week", y = "Active Minutes", x = "Day of Week") 
```

These graphs show which days of the week people are the most active. The first graph shows very active minutes while the second focuses on total active minutes. For the first graph we see that on Tuesday, people spend more time being very active compared to other days of the week, and Friday they spend the least. This also shows that, by the lighter blue chunks, people spend longer periods of time being very active on Sundays more than other days. Looking at the second graph we see that Tuesday is the most active day while Monday and Sunday are the least.

### Hourly Activity
```{r, message=FALSE}
hourlyIntensities %>% 
  mutate(ActivityHour = format(as.POSIXct(mdy_hms(ActivityHour)), format = "%H:%M")) %>% 
  select(ActivityHour, TotalIntensity) %>% 
  group_by(ActivityHour) %>% 
  summarise(TotalIntensity = sum(TotalIntensity)) %>%
  ggplot(aes(ActivityHour, TotalIntensity, fill=TotalIntensity)) +
  geom_bar(stat="identity") + 
  theme(axis.text.x = element_text(angle = 45, hjust=1)) +
  labs(title="Hourly Activity", y = "Total Intensity", x = "Hour")
```

This graph shows the average activity in a day per hour. It is clear that 5-7pm is when the most activity happens since these are the times with highest intensities. We can also see that 12-4am is the time where the least activity happens with the lowest average intensities. 

## Recomendations
### Personalized Messages
A good way to get people more active and interacting with their Bellabeat device is to send them personalized messages. This can be notifications that

* encourage the user during or after high activity intensities

* compare their current performance to a previous time; whether they improved or they should keep going to beat their last record to increase consistency and intensity

* compare their performance to the average of users in a similar demographic such as age range or location.

* motivate users to get active when they've spent too much time being sedentary

### Advertisments
The data shows that the most active time of the day is 5-7pm. This is typically when the work day ends so it can be said that most people are most active after work. The target audience for advertisements should include working women who, like the data suggests, spend most of their day being sedentary. The advertisements should motivate customers to start being active during their free time, and to purchase a Bellabeat device to easily help them with their active lifestyle. 

The more data collected the better it is to understand customers and give them guidance. Showcasing the convenience, ease, and style of wearing a Bellabeat product makes customers belief that they can easily wear the device and always have their access to their personalized statistics and messages. 

The data also suggests that on average, users typically spend their active time running, jogging, or walking. The advertisements should also show how a Bellabeat product would be a great hassle free addition to a person's daily running gear and how it can push them to go further. 
